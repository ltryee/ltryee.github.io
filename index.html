<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-transform"/>


    <title>
      
    ltryee's blog
    
    </title>


  <link href="asset/css/style.css" rel="stylesheet" > 
  <link href="asset/js/xcode.min.css" rel="stylesheet">
  <script src="asset/js/headroom.js"></script>

  <!-- <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="asset/css/font-awesome.css">
 -->

  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>


  </head>

  <!-- 主体开始 -->
  <!-- <body class="" gtools_scp_screen_capture_injected="true"> -->
  <!-- 上面为主页白底色版本 -->
    
<body class="bg-grey" gtools_scp_screen_capture_injected="true" data-feedly-mini="yes">
<!-- 上面是主页灰底色版本 -->

<!--[if lt IE 8]>
<div class="browsehappy" role="dialog">
    当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/" target="_blank">升级你的浏览器</a>。
</div>
<![endif]-->
<!-- 头部位置 -->

<header id="header" class="header bg-white headroom">
  <div class="navbar-container"> 
    <a href="index.html" class="navbar-logo"><img src="asset/img/avatar.jpg"> </a>
    <div class="navbar-menu"> 

        
        <a href="index.html">Home</a>
        
        <a href="archives.html">Archives</a>
        
        <a href="atom.xml">RSS</a>
        
        
    </div> 
    <!-- 搜索框体 -->
    <!--  <div class="navbar-search" onclick="">
        <span class="icon-search"></span>
        <form id="search" method="post" action="/" role="search">
          <span class="search-box">
            <input type="text" id="input" class="input" name="s" required="true" placeholder="Search..." maxlength="30" autocomplete="off">
          </span>
        </form>
    </div> -->

    <div class="navbar-mobile-menu" onclick=""> 
      <span class="icon-menu cross"><span class="middle"></span></span> 
        <ul> 
          
          <li>
          <a href="index.html">Home</a>
          </li>
          
          <li>
          <a href="archives.html">Archives</a>
          </li>
          
          <li>
          <a href="atom.xml">RSS</a>
          </li>
          
        </ul> 
    </div> 
  </div> 
</header>
<!-- 头部结束 -->  <!-- 这里是category的开始 -->
<div class="main-content index-page clearfix">
    <div class="post-lists">
        <div class="post-lists-body">
			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(https://github-io-1255919079.cos.ap-beijing.myqcloud.com/2023/12/30/17037815162923.jpg);">
						
						</div> 
						<a href="17033401283300.html"> 
							<div class="item-desc"> 
								<p>在前文中，我们设计了一种基于 UIStackView 的界面布局方案，实现了样式声明与事件响应的分离。我们首先使用 UIStackView 来创建了一个登录界面，通过对代码进行重构，实现了界面声明与实现的分离，这不仅提高了代码的解耦性，还增加了代码的可复用性。最后，我们在新的架构上更进一步，增加了一个界面样式，使得界面更加丰富多样。在本文中，我们将引入面向协议编程范式和依赖注入设计模式，进一步优化代码架构。
能用但不好用
在现有的代码中，我们已经实现了一些接口。在 View Controller 中，我们利用这些接口完成界面的构建，包括控件的添加、样式的设定和事件的绑定等。而在 generat</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="17033401283300.html">UIStackView 的另类玩法（二）</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(media/17032606548617/17037814799006.jpg);">
						
						</div> 
						<a href="17032606548617.html"> 
							<div class="item-desc"> 
								<p>UIStackView 是 iOS 9.0 引入的一个用户界面组件，它继承自 UIView。UIStackView 使得开发者能够通过简单的方式来布局一系列的子视图（称为 arrangedSubviews），无需直接操作 Auto Layout 约束。通过自动管理视图的布局约束，UIStackView 极大地简化了布局的复杂性，提高了开发效率，并有助于创建更加响应式和适应性强的用户界面。它的使用减少了布局代码，提高了代码的可读性和可维护性，并且易于实现动态内容的适应性。
UIStackView 简介
UIStackView 的工作原理

自动布局：UIStackView 使用 Auto Lay</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="17032606548617.html">UIStackView 的另类玩法（一）</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(media/16566860725573/17037803052247.jpg);">
						
						</div> 
						<a href="16566860725573.html"> 
							<div class="item-desc"> 
								<p>
XCFramework 简介

XCFramework 里有什么
如何制作 XCFramework


转换 arm64 二进制
Demo
References


我们在前一篇文章中提到，由于真机使用的 arm64 架构的二进制与 M1 模拟器使用的 arm64 架构二进制不兼容，在 xcode 工程中引入一些较早时间构建的 framework，会导致 arm64 架构模拟器链接失败。
构建年代久远的 framework，是没有模拟器可用的 arm64 二进制的，若是三方提供的闭源 framework，甚至连使用源码重新构建的机会都没有。
基于上述原因，我们只能通过现有的 framewor</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="16566860725573.html">使用 framework 转换 XCFramework</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='%E5%85%B6%E4%BB%96.html'>其他</a>
								
			    			<a class='category' href='CocoaPods.html'>CocoaPods</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(media/16558196375003/17037805699915.jpg);">
						
						</div> 
						<a href="16558196375003.html"> 
							<div class="item-desc"> 
								<p>
临时解决方案
深入分析

为什么如此多的架构会参与链接？
为什么链接 arm64 架构二进制会失败？


彻底的解决方案


我们在发布组件新版本到私有 pod 的过程中，遇到一个报错。通过分析 log，定位到报错信息：
ld: in /Users/kuaikan/jenkins/workspace/iOS-component-pipeline/component_source_Protobuf/Protobuf/Protobuf.framework/Protobuf(Api.pbobjc.o), building for iOS Simulator, but linking in obje</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="16558196375003.html">记一次私有 pod 发布报错</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='CocoaPods.html'>CocoaPods</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(media/16420705856849/17037807470486.jpg);">
						
						</div> 
						<a href="wan-zhuan-cocoapods-xu-yao-le.html"> 
							<div class="item-desc"> 
								<p>
表达式
函数

函数声明
不定长参数列表
函数返回值
?和!


Block

Block 语法
调用 Block


类
字面量

String
Array
Hash


eval
奇怪的知识又增加了
总结
参考


我们熟知的 cocoapods 工具是基于 ruby 语言开发的，如果想要更深入地了解 cocoapods 的功能，就需要了解一些 ruby 语言的知识。
本文介绍了 Podfile 和 Podspec 文件中涉及的 ruby 基本语法。
表达式
先来看一段再熟悉不过的 Podfile，你是否了解它的执行过程呢？
source 'https://github.com/Coco</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="wan-zhuan-cocoapods-xu-yao-le.html">玩转 CocoaPods 需要了解的 Ruby 基础知识</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='CocoaPods.html'>CocoaPods</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(media/16553980014674/17037808318750.jpg);">
						
						</div> 
						<a href="16553980014674.html"> 
							<div class="item-desc"> 
								<p>
已有方法
基于 LLDB Python API 的方案

方法简介
环境准备
存储流程


最佳实践

LLDB 的 Python 环境
Python REPL
导入自定义命令
查看已导入 lldb 的自定义命令
Python API 中的 lldb 模块


总结
参考


在编写单元测试的过程中，我们经常需要编写一类用例，用于验证后台返回的数据的正确性。
其中，用于验证的数据如何取得，受限于发送请求的安全性要求，一般 app 发送网络请求时会在数据中加入一些校验、防刷的额外信息，导致请求数据内容严重依赖于 app 上下文环境。目前获取后台响应数据主要有两种方法，一种是在 app 中发起真</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="16553980014674.html">使用 LLDB Python API 自动存储后台请求数据用于单元测试</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='Xcode.html'>Xcode</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(https://developer.apple.com/library/archive/documentation/LanguagesUtilities/Conceptual/MacAutomationScriptingGuide/Art/execute_script_2x.png);">
						
						</div> 
						<a href="15372506301626.html"> 
							<div class="item-desc"> 
								<p>
0. 学习一个新工具的时候，我们到底在学什么？
1. JXA 基本概念

脚本是如何工作的
脚本的类型有哪些


2. 安装工具
3. 开发环境

Script Editor

Hello world
寻求帮助


REPL
Shell Script
Shebang Script


4. 编程语言
5. 框架，全局对象，第三方库以及其他……

脚本中的事件处理函数(Event Handlers)
全局 JS 对象
JXA 与 ObjC

加载 OC 框架到 JS 上下文
调用 OC 方法的 JS 语法
引用调用传参




参考资料



从 macOS 10.10 开始(当时还叫 OS </p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="15372506301626.html">JavaScript for Automation(JXA) 入门</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='%E5%85%B6%E4%BB%96.html'>其他</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(media/15366534889994/17037810792148.jpg);">
						
						</div> 
						<a href="15366534889994.html"> 
							<div class="item-desc"> 
								<p>
URL Loading System

NSURLSession

Session类型
Task类型
使用delegate
线程安全性


NSURLSessionTask
NSURLSessionConfiguration

创建
可配置项


处理鉴权查询(Authentication Challenge)


NSURLConnection vs. NSURLSession
ATS

ATS 基本配置
自定义配置

全部启用 ATS
全部启用 ATS，但有一些例外
全部禁用 ATS，但有一些例外
降级的 ATS
全部禁用 ATS






URL Loading System
URL</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="15366534889994.html">《iOS面试之道》读书笔记 - 网络请求相关</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='%E3%80%8AiOS%E9%9D%A2%E8%AF%95%E4%B9%8B%E9%81%93%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html'>《iOS面试之道》读书笔记</a>
								
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(media/15365446737230/17037811818720.jpg);">
						
						</div> 
						<a href="15365446737230.html"> 
							<div class="item-desc"> 
								<p>
请求使用权限

在app启动时请求授权
根据授权配置支持的通知类型


从app发起本地通知

创建通知的内容(Notification Content)
指定触发条件(Notification Trigger)
创建并注册通知请求(Notification Request)
取消已规划的请求


向APNs注册你的app

启用推动通知功能
注册你的app并获取应用程序的设备令牌(Device Token)
将token转发到业务服务器


声明可操作的通知类型

声明自定义操作(Custom Action)和通知类型(Notification Type)
在有效载荷(Payload)中包</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="15365446737230.html">《iOS面试之道》读书笔记 - UserNotifications框架概况</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='%E3%80%8AiOS%E9%9D%A2%E8%AF%95%E4%B9%8B%E9%81%93%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html'>《iOS面试之道》读书笔记</a>
								
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			 
		</div>
	</div>
<!-- 底部导航条 -->
	<nav class="lists-navigator clearfix" style="clear: all;">
            <ol class="page-navigator">
            
            	<li class="  disabled "><a href="#index"><span aria-hidden="true">&larr;</span> 上一页</a></li>
            

				<li class=""><a href="archives.html">归档</a></li>

			
			<li class=""><a href="all_1.html">下一页 <span aria-hidden="true">&rarr;</span></a></li>
			
            </ol>
     </nav>
</div>
</div>  <footer id="footer" class="footer" style="background-color: #030501;color: #FFFFFE;">
  <div class="footer-meta">
    <div class="footer-container">
      <!-- 版权说明 -->
      <div class="meta-item meta-copyright">
        <div class="meta-copyright-info">
          <h2 class="meta-title">INFO</h2>
          <div class="info-text">  
              <p>Copyright &copy; 2017 <br>
              <span class="credit">Powered by 
              <a target="_blank" href="http://zh.mweb.im/">MWeb</a> 
              </span>
              <p>Theme Design by <a href="https://www.linpx.com/" target="_blank">Chakhsu</a></p>
              <p>Migrating to Mweb by <a href="http://metaidea.cn">idken</a></p>
              </p> 
          </div>                  
        </div>
      </div>  
      <!-- Categories -->
      <div class="meta-item meta-comments">
          <h2 class="meta-title">CATEGORIES</h2>  
             
            
            <li>
            <a href="%E3%80%8AiOS%E9%9D%A2%E8%AF%95%E4%B9%8B%E9%81%93%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html">《iOS面试之道》读书笔记&nbsp;(5)</a>
            <p>
            
            </p>
            </li>
            
             
            
            <li>
            <a href="iOS.html">iOS&nbsp;(10)</a>
            <p>
            
            </p>
            </li>
            
             
            
            <li>
            <a href="%E5%85%B6%E4%BB%96.html">其他&nbsp;(3)</a>
            <p>
            
            </p>
            </li>
            
             
            
            <li>
            <a href="CocoaPods.html">CocoaPods&nbsp;(3)</a>
            <p>
            
            </p>
            </li>
            
             
            
            </p>
            </li>
            
             
      </div>
      <!-- 最新文章 -->
      <div class="meta-item meta-comments">
          <h2 class="meta-title">RECENT POSTS</h2>

          
          
         <li>
           <a href="17033401283300.html">UIStackView 的另类玩法（二）</a><br>
         </li>
          
          
          
         <li>
           <a href="17032606548617.html">UIStackView 的另类玩法（一）</a><br>
         </li>
          
          
          
         <li>
           <a href="16566860725573.html">使用 framework 转换 XCFramework</a><br>
         </li>
          
          
          
         <li>
           <a href="16558196375003.html">记一次私有 pod 发布报错</a><br>
         </li>
          
          
          
         <li>
           <a href="wan-zhuan-cocoapods-xu-yao-le.html">玩转 CocoaPods 需要了解的 Ruby 基础知识</a><br>
         </li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
           

      </div>
  </div>
</div>
</footer>

<!--评论变量判断 -->

<script type="text/javascript">
    var disqus_shortname = 'ltryee'; 

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<script type="text/javascript">
var disqus_shortname = 'ltryee'; 

(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = '//' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
      
<!-- 评论end -->



</body>
</html>