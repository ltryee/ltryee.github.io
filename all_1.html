<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-transform"/>


    <title>
      
    ltryee's blog
    
    </title>


  <link href="asset/css/style.css" rel="stylesheet" > 
  <link href="asset/js/xcode.min.css" rel="stylesheet">
  <script src="asset/js/headroom.js"></script>

  <!-- <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="asset/css/font-awesome.css">
 -->

  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>


  </head>

  <!-- 主体开始 -->
  <!-- <body class="" gtools_scp_screen_capture_injected="true"> -->
  <!-- 上面为主页白底色版本 -->
    
<body class="bg-grey" gtools_scp_screen_capture_injected="true" data-feedly-mini="yes">
<!-- 上面是主页灰底色版本 -->

<!--[if lt IE 8]>
<div class="browsehappy" role="dialog">
    当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/" target="_blank">升级你的浏览器</a>。
</div>
<![endif]-->
<!-- 头部位置 -->

<header id="header" class="header bg-white headroom">
  <div class="navbar-container"> 
    <a href="index.html" class="navbar-logo"><img src="asset/img/avatar.jpg"> </a>
    <div class="navbar-menu"> 

        
        <a href="index.html">Home</a>
        
        <a href="archives.html">Archives</a>
        
        <a href="atom.xml">RSS</a>
        
        
    </div> 
    <!-- 搜索框体 -->
    <!--  <div class="navbar-search" onclick="">
        <span class="icon-search"></span>
        <form id="search" method="post" action="/" role="search">
          <span class="search-box">
            <input type="text" id="input" class="input" name="s" required="true" placeholder="Search..." maxlength="30" autocomplete="off">
          </span>
        </form>
    </div> -->

    <div class="navbar-mobile-menu" onclick=""> 
      <span class="icon-menu cross"><span class="middle"></span></span> 
        <ul> 
          
          <li>
          <a href="index.html">Home</a>
          </li>
          
          <li>
          <a href="archives.html">Archives</a>
          </li>
          
          <li>
          <a href="atom.xml">RSS</a>
          </li>
          
        </ul> 
    </div> 
  </div> 
</header>
<!-- 头部结束 -->  <!-- 这里是category的开始 -->
<div class="main-content index-page clearfix">
    <div class="post-lists">
        <div class="post-lists-body">
			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(media/15362253776879/17037813814777.jpg);">
						
						</div> 
						<a href="15362253776879.html"> 
							<div class="item-desc"> 
								<p>
OS X 和 iOS 中的并发编程API

Dispatch Queues
Dispatch Sources
Operation Queues


并发编程中的坑[^2]

资源共享
互斥锁
死锁
资源饥饿
优先级反转




并发(Concurrency)的概念即在同一时间运行多个任务(Task)。过去，将并发引入应用程序需要创建一个或多个其他线程(Thread)。然而编写直接操作线程的代码极具挑战性，你必须手动使用系统底层API。鉴于应用程序的最佳线程数可以根据当前系统负载和底层硬件动态更改，实现正确的线程解决方案会变得非常困难。此外，通常与线程一起使用的同步机制增加了软件设计的复杂性和</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="15362253776879.html">《iOS面试之道》读书笔记 - 并发编程</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='%E3%80%8AiOS%E9%9D%A2%E8%AF%95%E4%B9%8B%E9%81%93%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html'>《iOS面试之道》读书笔记</a>
								
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
                         	<div class="item-thumb bg-deepgrey" style="background-image:url();">
						
						</div> 
						<a href="15360488544502.html"> 
							<div class="item-desc"> 
								<p>
使用 atomic 修饰的 property 是如何保证原子性的？
使用 atomic 修饰的 property 是线程安全的吗？
如何保证 property 的线程安全性？


atomic和nonatomic用于在定义 property 时指明其原子性：

atomic表示是原子性的，调用该 property 的 getter 和 setter 会保证对象的完整性。多线程操作时，任何调用都可以得到一个完整的对象，因此速度较慢。
nonatomic表示是非原子性的，调用该 property 的 getter 和 setter 不保证对象的完整性。多个线程对它进行访问，它可能会返回未初始化的</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="15360488544502.html">《iOS面试之道》读书笔记 - atomic/nonatomic</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='%E3%80%8AiOS%E9%9D%A2%E8%AF%95%E4%B9%8B%E9%81%93%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html'>《iOS面试之道》读书笔记</a>
								
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
						<div class="item-thumb bg-deepgrey" style="background-image:url(media/15360396023892/17037812508662.jpg);">
						
						</div> 
						<a href="ios-mian-shi-zhi-dao-du-shu-bi.html"> 
							<div class="item-desc"> 
								<p>
Run Loop 基本概念
Run Loop 与线程的关系
Run Loop 的组成部分
何时使用 Run Loop？

Timer
performSelector:




Run Loop 基本概念
Run Loop就是一个在线程(thread)里不停执行的do-while循环。当线程接收到事件(event)时，Run Loop 内的事件处理会使用对应的句柄(handler)处理事件。
Run Loop 接受的事件可分为两种不同的源(source)，Input source传递异步事件，通常是其他线程或应用发送过来的消息(message)。Timer sources传递同步事件，即发生于</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="ios-mian-shi-zhi-dao-du-shu-bi.html">《iOS面试之道》读书笔记 - NSRunLoop</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='%E3%80%8AiOS%E9%9D%A2%E8%AF%95%E4%B9%8B%E9%81%93%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html'>《iOS面试之道》读书笔记</a>
								
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
                         	<div class="item-thumb bg-deepgrey" style="background-image:url();">
						
						</div> 
						<a href="15220556376633.html"> 
							<div class="item-desc"> 
								<p>
为工程添加XcodeCoverage代码
更新Xcode工程Scheme
更新Pods的xcconfig文件
注入提取环境变量的脚本
运行XcodeCoverage
Tips


XcodeCoverage 是一个基于lcov的统计工具，用于计算Xcode项目的单元测试覆盖率，且能生成html格式的统计报表。配置过程可以分为以下几个步骤：

为工程添加XcodeCoverage代码
更新Xcode工程Scheme
注入提取环境变量的脚本

为工程添加XcodeCoverage代码
使用CocoaPods可以方便地添加XcodeCoverage代码。修改Podfile并执行pod instal</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="15220556376633.html">使用XcodeCoverage统计单元测试覆盖率</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='Xcode.html'>Xcode</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
                         	<div class="item-thumb bg-deepgrey" style="background-image:url();">
						
						</div> 
						<a href="15220417245604.html"> 
							<div class="item-desc"> 
								<p>
获取一个版本周期内存在修改的代码文件列表
获取Xcode单元测试生成的每个代码文件的覆盖率数据

Xcode执行单元测试时提取环境变量
提取覆盖率数据


筛选并计算
Tips
参考


XcodeCoverage 是一个基于lcov的统计工具，用于计算Xcode项目的单元测试覆盖率，且能生成html格式的统计报表。
现在需要统计在一个版本周期中增量代码的覆盖率，而XcodeCoverage只能统计全量的覆盖率，因此需要借助XcodeCoverage生成的数据，手动计算版本周期中修改过的文件的覆盖率。问题可以分解为三个子问题：

获取一个版本周期内存在修改的代码文件列表
获取Xcode单元测</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="15220417245604.html">使用XcodeCoverage统计增量代码单元测试覆盖率</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='Xcode.html'>Xcode</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
                         	<div class="item-thumb bg-deepgrey" style="background-image:url();">
						
						</div> 
						<a href="15089947525979.html"> 
							<div class="item-desc"> 
								<p>
开发过程

编写代码
编译打包
部署到远程服务器


Tips

Docker &amp; Taf
为什么tnpm install命令会触发node-gyp的打包流程
如果Docker容器中没有全局安装node-gyp
在binding.gyp的source中引用文件


典型问题和解决方法

The program 'node-gyp' is currently not installed.
ERROR: cannot use 'throw' with exceptions disabled
编译出错的一种可能


参考


最近需要将一个c++编写的功能模块部署到Node服务上，所以研究</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="15089947525979.html">在Taf NodeJS工程中使用node-gyp</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='%E5%85%B6%E4%BB%96.html'>其他</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
                         	<div class="item-thumb bg-deepgrey" style="background-image:url();">
						
						</div> 
						<a href="14822246956860.html"> 
							<div class="item-desc"> 
								<p>本文介绍了一种名为依赖注入(Dependency Injection)的设计模式，并使用这种模式释放不必一直持有的对象，用来达到释放内存的效果。
什么是依赖注入
举个栗子：

“When you go and get things out of the refrigerator for yourself, you can cause problems. You might leave the door open, you might get something Mommy or Daddy doesn’t want you to have. You might even be looking </p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="14822246956860.html">依赖注入实现内存释放</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
                         	<div class="item-thumb bg-deepgrey" style="background-image:url();">
						
						</div> 
						<a href="14822246957173.html"> 
							<div class="item-desc"> 
								<p>
一种设置圆角的简单方法
性能损耗：掉帧

UIView和CALayer的关系
离屏渲染


总结


圆角是iOS系统中常见的视觉样式，从系统图标到导航栏按钮，圆角无处不在。因为圆角是符合人类视觉安全体验的，圆角让人觉得舒适，而尖角在潜意识层次是具有伤害体验的，因为尖尖的东西总是有可能对人造成伤害的，所以我们更喜欢圆角。在iOS开发过程中，苹果提供了一种添加圆角的方法，简单暴力有效，但并不是所有的开发者都清楚原理，因此设置圆角有时会带来一定的性能损耗。本文将从理论上介绍设置圆角方法，性能损耗的原因这两方面展开讨论。下一篇文章将从具体项目的实践中介绍如何避免性能损耗。
一种设置圆角的简单方法
</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="14822246957173.html">iOS 控件设置圆角（上）</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			
				<div class="post-list-item">
					<div class="post-list-item-container">
 <!-- 自定post背景图 -->
					 
                         	<div class="item-thumb bg-deepgrey" style="background-image:url();">
						
						</div> 
						<a href="14822246957408.html"> 
							<div class="item-desc"> 
								<p>
提升性能的几种方法

光栅化
裁剪图片
圆角遮罩
圆角背景图
文本视图类上实现圆角


总结


圆角是iOS系统中常见的视觉样式，从系统图标到导航栏按钮，圆角无处不在。因为圆角是符合人类视觉安全体验的，圆角让人觉得舒适，而尖角在潜意识层次是具有伤害体验的，因为尖尖的东西总是有可能对人造成伤害的，所以我们更喜欢圆角。在iOS开发过程中，苹果提供了一种添加圆角的方法，简单暴力有效，但并不是所有的开发者都清楚原理，因此设置圆角有时会带来一定的性能损耗。
上一篇文章从理论上介绍设置圆角方法，性能损耗的原因这两方面展开讨论。本文将从具体项目的实践中介绍如何避免性能损耗。
提升性能的几种方法
前文已经</p> 
							</div> 
						</a> 
<!-- 自定义Post颜色 -->
				
						<div class="item-slant reverse-slant bg-deepgrey"></div>
						

						<div class="item-slant"></div>
		 				<div class="item-label">
	  						<div class="item-title">
	  							<a href="14822246957408.html">iOS 控件设置圆角（下）</a>
	  						</div>
		   					<div class="item-meta clearfix"> 
<!-- 自定义Icon -->
								
		   						<div class="item-meta-ico bg-ico-note" style="background: url(asset/img/bg-ico.png) no-repeat;background-size: 40px auto;">
		   						</div> 
								

		   						<div class="item-meta-cat">
	  							
			    			<a class='category' href='iOS.html'>iOS</a>
								
		   						</div> 
		   					</div> 
		   					
		   				</div> 
   					</div>
 				</div>
 			 
		</div>
	</div>
<!-- 底部导航条 -->
	<nav class="lists-navigator clearfix" style="clear: all;">
            <ol class="page-navigator">
            
            	<li class=""><a href="all.html"><span aria-hidden="true">&larr;</span> 上一页</a></li>
            

				<li class=""><a href="archives.html">归档</a></li>

			
            	<li class=" disabled "><a href="#index">下一页 <span aria-hidden="true">&rarr;</span></a></li>
            
            </ol>
     </nav>
</div>
</div>  <footer id="footer" class="footer" style="background-color: #030501;color: #FFFFFE;">
  <div class="footer-meta">
    <div class="footer-container">
      <!-- 版权说明 -->
      <div class="meta-item meta-copyright">
        <div class="meta-copyright-info">
          <h2 class="meta-title">INFO</h2>
          <div class="info-text">  
              <p>Copyright &copy; 2017 <br>
              <span class="credit">Powered by 
              <a target="_blank" href="http://zh.mweb.im/">MWeb</a> 
              </span>
              <p>Theme Design by <a href="https://www.linpx.com/" target="_blank">Chakhsu</a></p>
              <p>Migrating to Mweb by <a href="http://metaidea.cn">idken</a></p>
              </p> 
          </div>                  
        </div>
      </div>  
      <!-- Categories -->
      <div class="meta-item meta-comments">
          <h2 class="meta-title">CATEGORIES</h2>  
             
            
            <li>
            <a href="%E3%80%8AiOS%E9%9D%A2%E8%AF%95%E4%B9%8B%E9%81%93%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html">《iOS面试之道》读书笔记&nbsp;(5)</a>
            <p>
            
            </p>
            </li>
            
             
            
            <li>
            <a href="iOS.html">iOS&nbsp;(10)</a>
            <p>
            
            </p>
            </li>
            
             
            
            <li>
            <a href="%E5%85%B6%E4%BB%96.html">其他&nbsp;(3)</a>
            <p>
            
            </p>
            </li>
            
             
            
            <li>
            <a href="CocoaPods.html">CocoaPods&nbsp;(3)</a>
            <p>
            
            </p>
            </li>
            
             
            
            </p>
            </li>
            
             
      </div>
      <!-- 最新文章 -->
      <div class="meta-item meta-comments">
          <h2 class="meta-title">RECENT POSTS</h2>

          
          
         <li>
           <a href="17033401283300.html">UIStackView 的另类玩法（二）</a><br>
         </li>
          
          
          
         <li>
           <a href="17032606548617.html">UIStackView 的另类玩法（一）</a><br>
         </li>
          
          
          
         <li>
           <a href="16566860725573.html">使用 framework 转换 XCFramework</a><br>
         </li>
          
          
          
         <li>
           <a href="16558196375003.html">记一次私有 pod 发布报错</a><br>
         </li>
          
          
          
         <li>
           <a href="wan-zhuan-cocoapods-xu-yao-le.html">玩转 CocoaPods 需要了解的 Ruby 基础知识</a><br>
         </li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
           

      </div>
  </div>
</div>
</footer>

<!--评论变量判断 -->

<script type="text/javascript">
    var disqus_shortname = 'ltryee'; 

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<script type="text/javascript">
var disqus_shortname = 'ltryee'; 

(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = '//' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
      
<!-- 评论end -->



</body>
</html>